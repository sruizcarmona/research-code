load("/baker/datasets/ukb55469/R-env/my_ukb_data.rda")
dim(my_ukb_data)
my_ukb_data$hospital_episode_type_f41231_0_0
my_ukb_data$hospital_episode_type_f41231_0_1
my_ukb_data$date_of_attending_assessment_centre_f53_0_00
my_ukb_data$date_of_attending_assessment_centre_f53_0_0
my_ukb_data$date_of_attending_assessment_centre_f53_0_1
my_ukb_data$date_of_attending_assessment_centre_f53_0_2
my_ukb_data$date_of_attending_assessment_centre_f53_1_0
my_ukb_data$date_of_attending_assessment_centre_f53_1_2
my_ukb_data$treatmentmedication_code_f20003_0_0
my_ukb_data$treatmentmedication_code_f20003_0_1
my_ukb_data$treatmentmedication_code_f20003_1_0
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_0))
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_1))
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_2))
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_3))
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_*))
library(stringr)
str_detect("treatmentmedication_code_f20003_0_",names(my_ukb_data))
names(my_ukb_data)[str_detect("treatmentmedication_code_f20003_0_",names(my_ukb_data))]
str_detect("asd",k)
str_detect("asd",c("asd","lk"))
grepl("treatmentmedication_code_f20003_0_",names(my_ukb_data))
sum(grepl("treatmentmedication_code_f20003_0_",names(my_ukb_data)))
sum(str_detect("treatmentmedication_code_f20003_0_",names(my_ukb_data)))
sum(str_detect("treatmentmedication_code_f20003_0_0",names(my_ukb_data)))
names(my_ukb_data)[grepl("treatmentmedication_code_f20003_0_",names(my_ukb_data))]
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_0_",names(my_ukb_data))]
sapply(t,function(x){sum(!is.na(my_ukb_data$x)})
sapply(t,function(x){sum(!is.na(my_ukb_data$x))})
x
sum(!is.na(my_ukb_data$t[1]))
sum(!is.na(my_ukb_data$`t[1]`))
t[1]
sum(!is.na(my_ukb_data$treatmentmedication_code_f20003_0_0)
)
sapply(t,function(x){sum(!is.na(my_ukb_data[,x]))})
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_*_0",names(my_ukb_data))]
t
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_*_0",names(my_ukb_data))]
t
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_*_1",names(my_ukb_data))]
t
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_1",names(my_ukb_data))]
t
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_._1",names(my_ukb_data))]
t
t <- names(my_ukb_data)[grepl("treatmentmedication_code_f20003_._0",names(my_ukb_data))]
t
my_ukb_data$date_of_attending_assessment_centre_f53_0_0
head(my_ukb_data$date_of_attending_assessment_centre_f53_0_0)
sapply(t,function(x){sum(!is.na(my_ukb_data[,x]))})
head(my_ukb_data$date_of_attending_assessment_centre_f53_1_0)
head(my_ukb_data$date_of_attending_assessment_centre_f53_2_0)
head(my_ukb_data$date_of_attending_assessment_centre_f53_3_0)
datecenter <- names(my_ukb_data)[grepl("date_of_attending_assessment_centre_f53_",names(my_ukb_data))]
sapply(datecenter,function(x){sum(!is.na(my_ukb_data[,x]))})
sapply(t,function(x){sum(!is.na(my_ukb_data[,x]))})
!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)
my_ukb_data$date_of_attending_assessment_centre_f53_3_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)]
sum(is.na(my_ukb_data$date_of_attending_assessment_centre_f53_3_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)]))
my_ukb_data$cholesterol_assay_date_f30691_0_0
my_ukb_data$cholesterol_assay_date_f30691_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)]
head(my_ukb_data$cholesterol_assay_date_f30691_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_3_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$eid[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_2_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_1_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_2_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$date_of_attending_assessment_centre_f53_3_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$cholesterol_assay_date_f30691_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$cholesterol_assay_date_f30691_1_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])c
head(my_ukb_data$cholesterol_assay_date_f30691_1_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$creactive_protein_assay_date_f30711_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$cholesterol_assay_date_f30691_1_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$cholesterol_f30690_0_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$cholesterol_f30690_1_0[!is.na(my_ukb_data$treatmentmedication_code_f20003_3_0)])
head(my_ukb_data$sample_collection_duration_f5_0_0)
head(my_ukb_data$verbal_nterview_signoff_timestamp_f21831_0_0)
head(my_ukb_data$date_of_attending_assessment_centre_f53_0_0)
my_ukb_data$urine_collection_signoff_timestamp_f21841_0_0
head(my_ukb_data$urine_collection_signoff_timestamp_f21841_0_0)
head(my_ukb_data$verbal_nterview_signoff_timestamp_f21831_0_0)
sum(!is.na(my_ukb_data$urine_collection_signoff_timestamp_f21841_0_0)
)
sum(!is.na(my_ukb_data$urine_collection_authorisation_f21741_0_0))
my_ukb_data$verbal_interview_duration_f3_0_0
source("/baker/datasets/ukb55469/R-env/ukb_functions.R")
extract_diagnose_icd10(my_ukb_data,'Z921')
k <- extract_diagnose_icd10(my_ukb_data,'Z921')
k
dim(k)
k2 <- extract_diagnose_icd10(my_ukb_data,'T455')
sum(k2$eid %in% k$eid)
k2$eid
extract_treatment_medication
anticoag <- extract_treatment_medication(my_ukb_data,codes=c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206")
)
anticoag <- extract_treatment_medication(my_ukb_data,codes=c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"))
anticoag <- extract_treatment_medication(my_ukb_data,c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"))
anticoag <- extract_treatment_medication(my_ukb_data,c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"),visit=1)
anticoag <- extract_treatment_medication(my_ukb_data,c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"),visit=c(0,1,2,3))
anticoag <- extract_treatment_medication(my_ukb_data,c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"))
visit=NULL
visit %in% c(0,1,2,3)
if (is.numeric(visit) & (visit %in% c(0, 1, 2, 3))) {echo 'hola'}
source("/baker/datasets/ukb55469/R-env/ukb_functions.R")
anticoag <- extract_treatment_medication(my_ukb_data,c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206"))
dim(anticoag)
antic_codes <- c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206")
ac.codes <- c("1140888266","1140909770","1140861702","1140861588","1140888204","1140888206")
sapply(ac.codes,function(x){dim(extract_treatment_medication(my_ukb_data,x))[1]})
sum(anticoag$eid %in% k$eid)
sum(anticoag$eid %in% k2$eid)
sapply(ac.codes,function(x){dim(extract_treatment_medication(my_ukb_data,x,visit=0))[1]})
sapply(ac.codes,function(x){dim(extract_treatment_medication(my_ukb_data,x,visit=1))[1]})
sapply(ac.codes,function(x){dim(extract_treatment_medication(my_ukb_data,x,visit=2))[1]})
load("vtd_data.rda")
load("/baker/datasets/ukb55469/R-env/vtd_data.rda")
ls()
no_icd10<-all_vte[!(all_vte$eid %in% icd10$eid),]
no_icd10$eid
no_icd10$eid [1]
no_icd10$age_when_attended_assessment_centre_f21003_0_0 [1]
no_icd10$ethnic_background_f21000_0_0[1]
no_icd10$ethnic_background_f21000_1_0[1]
no_icd10$ethnic_background_f21000_0_0[1]
no_icd10$ethnic_background_f21000_0_1[1]
no_icd10$ethnic_background_f21000_0_0[1]
no_icd10$place_of_birth_in_uk_east_coordinate_f130_0_0
no_icd10$place_of_birth_in_uk_east_coordinate_f130_0_0[1]
no_icd10$country_of_birth_ukelsewhere_f1647_0_0
no_icd10$country_of_birth_ukelsewhere_f1647_0_0[1]
no_icd10$income_score_england_f26411_0_0
kk <- no_icd10[1,]
kk$age_at_death_f40007_0_0
kk$age_at_death_f40007_1_0
kk
summary(no_icd10$ethnic_background_f21000_0_0)
summary(no_icd10$current_employment_status_f6142_0_0)
kk$current_employment_status_f6142_0_0
kk$current_employment_status_f6142_0_1
kk$current_employment_status_f6142_1_0
kk$current_employment_status_f6142_0_)
kk$current_employment_status_f6142_0_0
kk
kk$home_location_north_coordinate_rounded_f22704_0_0
kk$
kk$home_location_north_coordinate_rounded_f22704_0_0
summary(no_icd10$ethnic_background_f21000_0_0)
summary(no_icd10$education_score_england_f26414_0_0)
kk$job_involves_shift_work_f826_0_0
savehistory("sergio_ukbiobank_200514.Rhistory")
